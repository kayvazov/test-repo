import { r as ref, E as defineComponent, c as computed, p as provide, b as onMounted, e as watch, H as h$1, F as Fragment, G as toRaw, o as onUnmounted, w as watchEffect, n as nextTick, k as inject } from './iframe-B-YMhJRM.js';
import { d, e } from './form-B5TVLiQV.js';
import { o as o$1, u, f as f$1, E, s, A as A$1, T, t as t$1, N, a as o$2 } from './keyboard-Y5Ohh0Ec.js';
import { w, t, i, l } from './open-closed-n-oNVJpd.js';
import { s as s$1 } from './use-resolve-button-type-BRMzcgpv.js';
import { f, c, u as u$1 } from './calculate-active-index-BtXYA8d0.js';
import { w as w$1, h, O } from './focus-management-CfDY3olH.js';

let a=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function o(e){var r,i;let n=(r=e.innerText)!=null?r:"",t=e.cloneNode(!0);if(!(t instanceof HTMLElement))return n;let u=!1;for(let f of t.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))f.remove(),u=!0;let l=u?(i=t.innerText)!=null?i:"":n;return a.test(l)&&(l=l.replace(a,"")),l}function g(e){let n=e.getAttribute("aria-label");if(typeof n=="string")return n.trim();let t=e.getAttribute("aria-labelledby");if(t){let u=t.split(" ").map(l=>{let r=document.getElementById(l);if(r){let i=r.getAttribute("aria-label");return typeof i=="string"?i.trim():o(r).trim()}return null}).filter(Boolean);if(u.length>0)return u.join(", ")}return o(e).trim()}

function p(a){let t=ref(""),r=ref("");return ()=>{let e=o$1(a);if(!e)return "";let l=e.innerText;if(t.value===l)return r.value;let u=g(e).trim().toLowerCase();return t.value=l,r.value=u,u}}

function pe(t,c){return t===c}var ce=(l=>(l[l.Open=0]="Open",l[l.Closed=1]="Closed",l))(ce||{}),ve=(l=>(l[l.Single=0]="Single",l[l.Multi=1]="Multi",l))(ve||{}),be=(l=>(l[l.Pointer=0]="Pointer",l[l.Other=1]="Other",l))(be||{});function me(t){requestAnimationFrame(()=>requestAnimationFrame(t));}let $=Symbol("ListboxContext");function A(t){let c=inject($,null);if(c===null){let l=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,A),l}return c}let Ie=defineComponent({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>pe},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t$1,{slots:c$1,attrs:l,emit:L}){let e$1=ref(1),d$1=ref(null),v=ref(null),b=ref(null),f$2=ref([]),o=ref(""),i$1=ref(null),T$1=ref(1);function D(a=n=>n){let n=i$1.value!==null?f$2.value[i$1.value]:null,u=O(a(f$2.value.slice()),O=>o$1(O.dataRef.domRef)),s=n?u.indexOf(n):null;return s===-1&&(s=null),{options:u,activeOptionIndex:s}}let y=computed(()=>t$1.multiple?1:0),[h$2,V]=d(computed(()=>t$1.modelValue),a=>L("update:modelValue",a),computed(()=>t$1.defaultValue)),M=computed(()=>h$2.value===void 0?u(y.value,{[1]:[],[0]:void 0}):h$2.value),r={listboxState:e$1,value:M,mode:y,compare(a,n){if(typeof t$1.by=="string"){let u=t$1.by;return (a==null?void 0:a[u])===(n==null?void 0:n[u])}return t$1.by(a,n)},orientation:computed(()=>t$1.horizontal?"horizontal":"vertical"),labelRef:d$1,buttonRef:v,optionsRef:b,disabled:computed(()=>t$1.disabled),options:f$2,searchQuery:o,activeOptionIndex:i$1,activationTrigger:T$1,closeListbox(){t$1.disabled||e$1.value!==1&&(e$1.value=1,i$1.value=null);},openListbox(){t$1.disabled||e$1.value!==0&&(e$1.value=0);},goToOption(a,n,u){if(t$1.disabled||e$1.value===1)return;let s=D(),O=f(a===c.Specific?{focus:c.Specific,id:n}:{focus:a},{resolveItems:()=>s.options,resolveActiveIndex:()=>s.activeOptionIndex,resolveId:k=>k.id,resolveDisabled:k=>k.dataRef.disabled});o.value="",i$1.value=O,T$1.value=u!=null?u:1,f$2.value=s.options;},search(a){if(t$1.disabled||e$1.value===1)return;let u=o.value!==""?0:1;o.value+=a.toLowerCase();let O=(i$1.value!==null?f$2.value.slice(i$1.value+u).concat(f$2.value.slice(0,i$1.value+u)):f$2.value).find(I=>I.dataRef.textValue.startsWith(o.value)&&!I.dataRef.disabled),k=O?f$2.value.indexOf(O):-1;k===-1||k===i$1.value||(i$1.value=k,T$1.value=1);},clearSearch(){t$1.disabled||e$1.value!==1&&o.value!==""&&(o.value="");},registerOption(a,n){let u=D(s=>[...s,{id:a,dataRef:n}]);f$2.value=u.options,i$1.value=u.activeOptionIndex;},unregisterOption(a){let n=D(u=>{let s=u.findIndex(O=>O.id===a);return s!==-1&&u.splice(s,1),u});f$2.value=n.options,i$1.value=n.activeOptionIndex,T$1.value=1;},theirOnChange(a){t$1.disabled||V(a);},select(a){t$1.disabled||V(u(y.value,{[0]:()=>a,[1]:()=>{let n=toRaw(r.value.value).slice(),u=toRaw(a),s=n.findIndex(O=>r.compare(u,toRaw(O)));return s===-1?n.push(u):n.splice(s,1),n}}));}};w([v,b],(a,n)=>{var u;r.closeListbox(),w$1(n,h.Loose)||(a.preventDefault(),(u=o$1(v))==null||u.focus());},computed(()=>e$1.value===0)),provide($,r),t(computed(()=>u(e$1.value,{[0]:i.Open,[1]:i.Closed})));let m=computed(()=>{var a;return (a=o$1(v))==null?void 0:a.closest("form")});return onMounted(()=>{watch([m],()=>{if(!m.value||t$1.defaultValue===void 0)return;function a(){r.theirOnChange(t$1.defaultValue);}return m.value.addEventListener("reset",a),()=>{var n;(n=m.value)==null||n.removeEventListener("reset",a);}},{immediate:!0});}),()=>{let{name:a,modelValue:n,disabled:u,form:s$1,...O}=t$1,k={open:e$1.value===0,disabled:u,value:M.value};return h$1(Fragment,[...a!=null&&M.value!=null?e({[a]:M.value}).map(([I,Q])=>h$1(f$1,E({features:s.Hidden,key:I,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:s$1,name:I,value:Q}))):[],A$1({ourProps:{},theirProps:{...l,...T(O,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:k,slots:c$1,attrs:l,name:"Listbox"})])}}}),Ee=defineComponent({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:()=>`headlessui-listbox-label-${t$1()}`}},setup(t,{attrs:c,slots:l}){let L=A("ListboxLabel");function e(){var d;(d=o$1(L.buttonRef))==null||d.focus({preventScroll:!0});}return ()=>{let d={open:L.listboxState.value===0,disabled:L.disabled.value},{id:v,...b}=t,f={id:v,ref:L.labelRef,onClick:e};return A$1({ourProps:f,theirProps:b,slot:d,attrs:c,slots:l,name:"ListboxLabel"})}}}),je=defineComponent({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${t$1()}`}},setup(t,{attrs:c$1,slots:l,expose:L}){let e=A("ListboxButton");L({el:e.buttonRef,$el:e.buttonRef});function d(o){switch(o.key){case o$2.Space:case o$2.Enter:case o$2.ArrowDown:o.preventDefault(),e.openListbox(),nextTick(()=>{var i;(i=o$1(e.optionsRef))==null||i.focus({preventScroll:!0}),e.value.value||e.goToOption(c.First);});break;case o$2.ArrowUp:o.preventDefault(),e.openListbox(),nextTick(()=>{var i;(i=o$1(e.optionsRef))==null||i.focus({preventScroll:!0}),e.value.value||e.goToOption(c.Last);});break}}function v(o){switch(o.key){case o$2.Space:o.preventDefault();break}}function b(o){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),nextTick(()=>{var i;return (i=o$1(e.buttonRef))==null?void 0:i.focus({preventScroll:!0})})):(o.preventDefault(),e.openListbox(),me(()=>{var i;return (i=o$1(e.optionsRef))==null?void 0:i.focus({preventScroll:!0})})));}let f=s$1(computed(()=>({as:t.as,type:c$1.type})),e.buttonRef);return ()=>{var y,h;let o={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:i,...T}=t,D={ref:e.buttonRef,id:i,type:f.value,"aria-haspopup":"listbox","aria-controls":(y=o$1(e.optionsRef))==null?void 0:y.id,"aria-expanded":e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(h=o$1(e.labelRef))==null?void 0:h.id,i].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:d,onKeyup:v,onClick:b};return A$1({ourProps:D,theirProps:T,slot:o,attrs:c$1,slots:l,name:"ListboxButton"})}}}),Ae=defineComponent({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${t$1()}`}},setup(t,{attrs:c$1,slots:l$1,expose:L}){let e=A("ListboxOptions"),d=ref(null);L({el:e.optionsRef,$el:e.optionsRef});function v(o){switch(d.value&&clearTimeout(d.value),o.key){case o$2.Space:if(e.searchQuery.value!=="")return o.preventDefault(),o.stopPropagation(),e.search(o.key);case o$2.Enter:if(o.preventDefault(),o.stopPropagation(),e.activeOptionIndex.value!==null){let i=e.options.value[e.activeOptionIndex.value];e.select(i.dataRef.value);}e.mode.value===0&&(e.closeListbox(),nextTick(()=>{var i;return (i=o$1(e.buttonRef))==null?void 0:i.focus({preventScroll:!0})}));break;case u(e.orientation.value,{vertical:o$2.ArrowDown,horizontal:o$2.ArrowRight}):return o.preventDefault(),o.stopPropagation(),e.goToOption(c.Next);case u(e.orientation.value,{vertical:o$2.ArrowUp,horizontal:o$2.ArrowLeft}):return o.preventDefault(),o.stopPropagation(),e.goToOption(c.Previous);case o$2.Home:case o$2.PageUp:return o.preventDefault(),o.stopPropagation(),e.goToOption(c.First);case o$2.End:case o$2.PageDown:return o.preventDefault(),o.stopPropagation(),e.goToOption(c.Last);case o$2.Escape:o.preventDefault(),o.stopPropagation(),e.closeListbox(),nextTick(()=>{var i;return (i=o$1(e.buttonRef))==null?void 0:i.focus({preventScroll:!0})});break;case o$2.Tab:o.preventDefault(),o.stopPropagation();break;default:o.key.length===1&&(e.search(o.key),d.value=setTimeout(()=>e.clearSearch(),350));break}}let b=l(),f=computed(()=>b!==null?(b.value&i.Open)===i.Open:e.listboxState.value===0);return ()=>{var y,h;let o={open:e.listboxState.value===0},{id:i,...T}=t,D={"aria-activedescendant":e.activeOptionIndex.value===null||(y=e.options.value[e.activeOptionIndex.value])==null?void 0:y.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(h=o$1(e.buttonRef))==null?void 0:h.id,"aria-orientation":e.orientation.value,id:i,onKeydown:v,role:"listbox",tabIndex:0,ref:e.optionsRef};return A$1({ourProps:D,theirProps:T,slot:o,attrs:c$1,slots:l$1,features:N.RenderStrategy|N.Static,visible:f.value,name:"ListboxOptions"})}}}),Fe=defineComponent({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${t$1()}`}},setup(t,{slots:c$1,attrs:l,expose:L}){let e=A("ListboxOption"),d=ref(null);L({el:d,$el:d});let v=computed(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t.id:!1),b=computed(()=>u(e.mode.value,{[0]:()=>e.compare(toRaw(e.value.value),toRaw(t.value)),[1]:()=>toRaw(e.value.value).some(r=>e.compare(toRaw(r),toRaw(t.value)))})),f=computed(()=>u(e.mode.value,{[1]:()=>{var m;let r=toRaw(e.value.value);return ((m=e.options.value.find(a=>r.some(n=>e.compare(toRaw(n),toRaw(a.dataRef.value)))))==null?void 0:m.id)===t.id},[0]:()=>b.value})),o=p(d),i=computed(()=>({disabled:t.disabled,value:t.value,get textValue(){return o()},domRef:d}));onMounted(()=>e.registerOption(t.id,i)),onUnmounted(()=>e.unregisterOption(t.id)),onMounted(()=>{watch([e.listboxState,b],()=>{e.listboxState.value===0&&b.value&&u(e.mode.value,{[1]:()=>{f.value&&e.goToOption(c.Specific,t.id);},[0]:()=>{e.goToOption(c.Specific,t.id);}});},{immediate:!0});}),watchEffect(()=>{e.listboxState.value===0&&v.value&&e.activationTrigger.value!==0&&nextTick(()=>{var r,m;return (m=(r=o$1(d))==null?void 0:r.scrollIntoView)==null?void 0:m.call(r,{block:"nearest"})});});function T(r){if(t.disabled)return r.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),nextTick(()=>{var m;return (m=o$1(e.buttonRef))==null?void 0:m.focus({preventScroll:!0})}));}function D(){if(t.disabled)return e.goToOption(c.Nothing);e.goToOption(c.Specific,t.id);}let y=u$1();function h(r){y.update(r);}function V(r){y.wasMoved(r)&&(t.disabled||v.value||e.goToOption(c.Specific,t.id,0));}function M(r){y.wasMoved(r)&&(t.disabled||v.value&&e.goToOption(c.Nothing));}return ()=>{let{disabled:r}=t,m={active:v.value,selected:b.value,disabled:r},{id:a,value:n,disabled:u,...s}=t,O={id:a,ref:d,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":b.value,disabled:void 0,onClick:T,onFocus:D,onPointerenter:h,onMouseenter:h,onPointermove:V,onMousemove:V,onPointerleave:M,onMouseleave:M};return A$1({ourProps:O,theirProps:s,slot:m,attrs:l,slots:c$1,name:"ListboxOption"})}}});

export { Ae as A, Ee as E, Fe as F, Ie as I, je as j };
