import { w as watchEffect, r as ref, H as h, E as defineComponent, p as provide, k as inject, c as computed, b as onMounted, e as watch, o as onUnmounted, Q as Teleport, a as reactive, R as getCurrentInstance } from './iframe-B-YMhJRM.js';
import { c, i } from './focus-management-CfDY3olH.js';
import { b as w } from './open-closed-n-oNVJpd.js';
import { s as s$1, f, o, A as A$1 } from './keyboard-Y5Ohh0Ec.js';

function E(n,e,o,r){c.isServer||watchEffect(t=>{n=n!=null?n:window,n.addEventListener(e,o,r),t(()=>n.removeEventListener(e,o,r));});}

var d=(r=>(r[r.Forwards=0]="Forwards",r[r.Backwards=1]="Backwards",r))(d||{});function n(){let o=ref(0);return w("keydown",e=>{e.key==="Tab"&&(o.value=e.shiftKey?1:0);}),o}

function N$1({defaultContainers:o$1=[],portals:i$1,mainTreeNodeRef:H}={}){let t=ref(null),r=i(t);function u(){var l,f,a;let n=[];for(let e of o$1)e!==null&&(e instanceof HTMLElement?n.push(e):"value"in e&&e.value instanceof HTMLElement&&n.push(e.value));if(i$1!=null&&i$1.value)for(let e of i$1.value)n.push(e);for(let e of (l=r==null?void 0:r.querySelectorAll("html > *, body > *"))!=null?l:[])e!==document.body&&e!==document.head&&e instanceof HTMLElement&&e.id!=="headlessui-portal-root"&&(e.contains(o(t))||e.contains((a=(f=o(t))==null?void 0:f.getRootNode())==null?void 0:a.host)||n.some(M=>e.contains(M))||n.push(e));return n}return {resolveContainers:u,contains(n){return u().some(l=>l.contains(n))},mainTreeNodeRef:t,MainTreeNode(){return H!=null?null:h(f,{features:s$1.Hidden,ref:t})}}}

let e=Symbol("ForcePortalRootContext");function s(){return inject(e,!1)}let u=defineComponent({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(o,{slots:t,attrs:r}){return provide(e,o.force),()=>{let{force:f,...n}=o;return A$1({theirProps:n,ourProps:{},slot:{},slots:t,attrs:r,name:"ForcePortalRoot"})}}});

function x(r){let e=i(r);if(!e){if(r===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${r}`)}let u=e.getElementById("headlessui-portal-root");if(u)return u;let t=e.createElement("div");return t.setAttribute("id","headlessui-portal-root"),e.body.appendChild(t)}let _=defineComponent({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(r,{slots:e,attrs:u}){let t=ref(null),i$1=computed(()=>i(t)),l=s(),n=inject(C,null),o$1=ref(l===!0||n==null?x(t.value):n.resolveTarget()),d=ref(!1);onMounted(()=>{d.value=!0;}),watchEffect(()=>{l||n!=null&&(o$1.value=n.resolveTarget());});let c=inject(m,null),v=!1,H=getCurrentInstance();return watch(t,()=>{if(v||!c)return;let a=o(t);a&&(onUnmounted(c.register(a),H),v=!0);}),onUnmounted(()=>{var g,P;let a=(g=i$1.value)==null?void 0:g.getElementById("headlessui-portal-root");a&&o$1.value===a&&o$1.value.children.length<=0&&((P=o$1.value.parentElement)==null||P.removeChild(o$1.value));}),()=>{if(!d.value||o$1.value===null)return null;let a={ref:t,"data-headlessui-portal":""};return h(Teleport,{to:o$1.value},A$1({ourProps:a,theirProps:r,slot:{},attrs:u,slots:e,name:"Portal"}))}}}),m=Symbol("PortalParentContext");function A(){let r=inject(m,null),e=ref([]);function u(l){return e.value.push(l),r&&r.register(l),()=>t(l)}function t(l){let n=e.value.indexOf(l);n!==-1&&e.value.splice(n,1),r&&r.unregister(l);}let i={register:u,unregister:t,portals:e};return [e,defineComponent({name:"PortalWrapper",setup(l,{slots:n}){return provide(m,i),()=>{var o;return (o=n.default)==null?void 0:o.call(n)}}})]}let C=Symbol("PortalGroupContext"),N=defineComponent({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(r,{attrs:e,slots:u}){let t=reactive({resolveTarget(){return r.target}});return provide(C,t),()=>{let{target:i,...l}=r;return A$1({theirProps:l,ourProps:{},slot:{},attrs:e,slots:u,name:"PortalGroup"})}}});

export { A, E, N$1 as N, _, N as a, d, n, u };
